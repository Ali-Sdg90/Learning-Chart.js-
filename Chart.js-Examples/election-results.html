<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Election Results Chart</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    </head>
    <body>
        <style>
            * {
                padding: 0;
                margin: 0;
                box-sizing: border-box;
            }

            body {
                display: flex;
                flex-flow: row nowrap;
                justify-content: center;
                align-items: center;
                height: 100vh;
                background-color: #222;
            }

            .chart-container {
                width: 900px;
                height: 600px;
                background-color: white;
                padding: 10px;
                box-shadow: 0 0 10px 10px rgba(0, 0, 0, 0.2);
            }
        

            #electionResultsChart {
                width: 100%;
                height: 100%;
            }
        </style>
        <div class="chart-container">
            <canvas id="electionResultsChart"></canvas>
        </div>
        <script>
            Chart.register(ChartDataLabels);

            const ctx = document
                .getElementById("electionResultsChart")
                .getContext("2d");
            const electionResultsChart = new Chart(ctx, {
                type: "bar",
                data: {
                    datasets: [
                        {
                            label: "Elected",
                            data: [
                                30095, 26578, 25823, 24735, 23183, 18548, 15774,
                                13439, 12471, 12356, 5678,
                            ],
                            borderRadius: 4,
                            barThickness: 20,
                            borderSkipped: false,
                            backgroundColor: [
                                "rgba(0, 166, 107, 0.3)",
                                "rgba(0, 166, 107, 0.3)",
                                "rgba(0, 166, 107, 0.3)",
                                "rgba(0, 166, 107, 0.3)",
                                "rgba(100, 120, 130, 0.3)",
                                "rgba(100, 120, 130, 0.3)",
                                "rgba(100, 120, 130, 0.3)",
                                "rgba(100, 120, 130, 0.3)",
                                "rgba(100, 120, 130, 0.3)",
                                "rgba(100, 120, 130, 0.3)",
                                "rgba(100, 120, 130, 0.3)",
                            ],
                            borderColor: [
                                "rgba(0, 166, 107, 1)",
                                "rgba(0, 166, 107, 1)",
                                "rgba(0, 166, 107, 1)",
                                "rgba(0, 166, 107, 1)",
                                "rgba(100, 120, 130, 1)",
                                "rgba(100, 120, 130, 1)",
                                "rgba(100, 120, 130, 1)",
                                "rgba(100, 120, 130, 1)",
                                "rgba(100, 120, 130, 1)",
                                "rgba(100, 120, 130, 1)",
                                "rgba(100, 120, 130, 1)",
                            ],
                            borderWidth: 1.5,
                        },
                    ],
                    labels: [
                        "Michael Chan",
                        "Jim Jones",
                        "Joe Li",
                        "Alan Ho",
                        "Nirmala Armstrong",
                        "Allan Tam",
                        "Shanta Sundarason",
                        "Sophia Sun",
                        "Greg Marcos",
                        "Ivy Lee",
                        "Srini Suppira",
                    ],
                },
                options: {
                    indexAxis: "y",
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        datalabels: {
                            display: true,
                            anchor: "end",
                            align: "end",
                            padding: 4,
                            color: "#647882",
                            font: {
                                family: "sans-serif",
                                size: 14,
                                style: "normal",
                            },
                            formatter: (value, context) => {
                                return value;
                            },
                        },
                        title: {
                            display: true,
                            text: "Election results in your area",
                            color: "#00323F",
                            font: {
                                size: 22,
                                family: "sans-serif",
                                weight: "bold",
                            },
                            padding: 14,
                        },
                        legend: {
                            display: true,
                            position: "top",
                            labels: {
                                generateLabels: function (chart) {
                                    const originalLabels =
                                        Chart.defaults.plugins.legend.labels.generateLabels(
                                            chart
                                        );
                                    originalLabels.push({
                                        text: "Not elected",
                                        fillStyle: "rgba(100, 120, 130, 0.3)",
                                    });
                                    return originalLabels;
                                },
                                color: "#00323F",
                                font: {
                                    size: 12,
                                    family: "sans-serif",
                                    weight: "normal",
                                },
                                padding: 14,
                            },
                        },
                        tooltip: {
                            enabled: true,
                        },
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: "Number of votes",
                                color: "#00323F",
                                font: {
                                    size: 16,
                                    family: "sans-serif",
                                    weight: "bold",
                                },
                                padding: 14,
                            },
                            ticks: {
                                color: "#00323F",
                                font: {
                                    size: 12,
                                    family: "sans-serif",
                                    weight: "bold",
                                },
                            },
                        },
                        y: {
                            title: {
                                display: true,
                                text: "Candidates",
                                color: "#00323F",
                                font: {
                                    size: 16,
                                    family: "sans-serif",
                                    weight: "bold",
                                },
                                padding: 14,
                            },
                            ticks: {
                                color: "#00323F",
                                font: {
                                    size: 12,
                                    family: "sans-serif",
                                    weight: "bold",
                                },
                            },
                            barThickness: "flex",
                            categoryPercentage: 0.8,
                        },
                    },
                },
            });
        </script>
    </body>
</html>
